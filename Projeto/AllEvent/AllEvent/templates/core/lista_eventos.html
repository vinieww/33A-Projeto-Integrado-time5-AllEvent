{% extends "base.html" %}

{% block title %}
    {% if termo_busca %}
        Resultados para "{{ termo_busca }}"
    {% else %}
        Todos os Eventos
    {% endif %}
{% endblock %}

{% block content %}
<style>
    /* Adicionei o estilo da etiqueta aqui para garantir que apare√ßa azul */
    .category-badge {
        display: inline-block;
        background-color: #007bff; /* Azul */
        color: white;
        font-size: 0.75rem;
        padding: 4px 10px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: 700;
        margin-bottom: 8px;
    }
</style>

<div class="container" style="padding: 2rem 1rem;">

    {% if termo_busca %}
        <h1>Resultados da busca por: "{{ termo_busca }}"</h1>
        <p><a href="{% url 'lista_eventos' %}">Ver todos os eventos</a></p>
    {% else %}
        <h1>Todos os Eventos</h1>
        <p>Explore o cat√°logo completo de eventos dispon√≠veis.</p>
    {% endif %}

    <a href="{% url 'buscar_eventos' %}" class="btn btn-secondary" style="margin-top: 1rem; margin-bottom: 2rem; display: inline-block;">
        üîç Fazer uma busca espec√≠fica
    </a>
    
    <section class="events">
        <div class="event-grid">
          
            {% for evento in eventos %}
                <a class="event-card" href="{% url 'detalhe_evento' evento.id %}">
                    {% if evento.imagem %}
                        <img src="{{ evento.imagem.url }}" alt="Imagem do evento {{ evento.nome }}">
                    {% else %}
                        <img src="https://via.placeholder.com/300x200" alt="Sem imagem">
                    {% endif %}

                    <div class="body">
                        
                        {% if evento.categoria %}
                            <div class="category-badge">{{ evento.categoria.nome }}</div>
                        {% endif %}
                        <div class="date-badge">{{ evento.data|date:"M d" }}</div>
                        <div class="row">
                            <div class="title">{{ evento.nome }}</div>
                            <div class="uf">{{ evento.local }}</div>
                        </div>
                        <p class="desc">{{ evento.descricao|truncatewords:10 }}</p>
                    </div>
                </a>
            {% empty %}
                <div style="grid-column: 1 / -1; text-align: center; margin-top: 2rem;">
                    <p>Nenhum evento encontrado.</p>
                    {% if termo_busca %}
                        <p>Tente refazer sua busca com outros termos.</p>
                    {% endif %}
                </div>
            {% endfor %}
    
        </div>
    </section>

</div>
{% endblock %}